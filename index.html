
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Mike Taptich</title>

    <!-- Bootstrap Core CSS -->
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" rel="stylesheet" type="text/css">

    <!-- Fonts -->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="stylesheets/css/codemirror.css">
    <script src="stylesheets/js/codemirror.js"></script>
    <script src="stylesheets/js/xml.js"></script>
    <script src="stylesheets/js/javascript.js"></script>
    <script src="stylesheets/js/css.js"></script>
    <script src="stylesheets/js/htmlmixed.js"></script>

    <!-- Custom Theme CSS -->
    <link href="stylesheets/css/greyScale.css" rel="stylesheet">

</head>

<body id="page-top" data-spy="scroll" data-target=".navbar-custom">

    <nav class="navbar navbar-custom navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="#page-top">
                    <i class="fa fa-play-circle"></i>  <span class="light">On-Ramp to</span> Data Visualizations
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-right navbar-main-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href="http://vudlab.com/" target="_blank">VUDlab</a>
                    </li>
                    <li class="page-scroll">
                        <a href="http://d3js.org/" target="_blank">d3.js</a>
                    </li>
                    <li class="page-scroll">
                        <a href="mailto:m.taptich@berkeley.edu" target="_blank">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <section class="intro">
        <div class="intro-body">
            <div class="container">
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <h1 class="intro-text" style="margin-top: -100px">"The image of the world around us, which we carry in our head, is just a model." - <a href="http://en.wikipedia.org/wiki/Mental_model" target="_blank">Jay Wright Forrester</a> </h1>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-7 col-sm-8">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">Systems are not static:</h2>
                    <p class="lead"> An important skill scientists and engineers must have is the ability to effectively present and conveny the content of their analyses.</p>
                </div>
                <div class="col-lg-8 col-lg-offset-2 col-sm-8">
                    <iframe id="wealth" src="http://bost.ocks.org/mike/nations/" scrolling ="no" frameborder="0" height="800px" width="1200px"></iframe>
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->

     <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-7 col-sm-8">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">Benefits of Web-Based Content:</h2>
                    <p class="lead"> Loading a webpage has ZERO added costs, while computer programs and other software do.</p>
                </div>
                <div class="col-lg-8 col-lg-offset-2 col-sm-8">
                    <iframe id="wealth" src="http://www.christopheviau.com/d3list/gallery.html" scrolling ="yes" frameborder="0" height="800px" width="1200px"></iframe>
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->


     <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-7 col-sm-8">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">Causal-based learning:</h2>
                    <p class="lead"> Interacting with allows viewers to learn by doing.  I can tell you that the connections of a system are complex, or I can have you explore for yourself.</p>
                </div>
                <div class="col-lg-8 col-lg-offset-2 col-sm-8">
                    <h2> Simple System </h2>
                    <iframe id="wealth" src="http://ce11gsi.appspot.com/stylesheets/process_LCA.html" scrolling ="yes" frameborder="0" height="600px" width="1200px"></iframe>

                    <h2> Complex System </h2>
                    <iframe id="wealth" src="http://ce11gsi.appspot.com/stylesheets/process_LCA_complicated.html" scrolling ="yes" frameborder="0" height="600px" width="1200px"></iframe>
                </div>
            </div>

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->

    <section class="bg-2" id="section3" style="text-align: center;">
        <h2 style="padding: 20px;  background-color:rgba(5,5,5,.8); color: #fff">Getting Started</h2>
    </section>

     <div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-5 col-sm-6">
                    <div class="clearfix"></div>
                    <h1>We need to do five boring things to get started:</h1>
                </div>
                 <div class="col-lg-4 col-sm-5">
                    <h3>Steps:</h3>
                    <ol style="margin-top:-10px">
                      <li>Install a Text editor (Sublime Text).</li>
                      <li>Install a computer language called NodeJS.</li>
                      <li>Run a server/localhost.</li>
                      <li>Learn to navigate around with Terminal/Command Prompt.</li>
                      <li>Save a basic HTML page.</li>
                    </ol>

                </div>
                <div class="col-lg-10 col-sm-11">

                    <!-- INSTALL SUBLIME -->
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h3>#1 Install Sublime Text 3</h3>
                    <p><b>Sublime Text</b> is a beautiful text editor. Download it below and pay if you feel generous (optional but preferred). Other text editors include <a href="http://download.cnet.com/TextWrangler/3000-2351_4-10220012.html" target="_blank">TextWrangler</a> and <a href="http://download.cnet.com/TextMate/3000-2079_4-53602.html" target="_blank">TextMate</a>. </p>
                    <iframe id="wealth" src="http://www.sublimetext.com/3" height="400px" width="1000px"></iframe>
                    
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h3>#2 Install Node.JS</h3>

                    <p>We need to use Node or Python to run a local server, so we can see our web pages. It's like making a little Internet on your computer.</p>
                    <p>If you are a OSX or Linux user, you probably already have python installed by default. All you need to do to create a simple server is open your terminal and paste this: <code>python -m SimpleHTTPServer</code>  However, python is not installed aleady on PCs. Node is easiest for Windows users to installed, so we're going to show this approach for the demo.</p>
                    <iframe id="wealth" src="http://nodejs.org/download/" height="400px" width="1000px"></iframe>


                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h3>#3 Make a Little Internet w/ a local server</h3>
 
                    <p>We're going to install a package for Node called http-server. OSX/Linux users, open a Terminal window. Windows users, open Command Prompt.</p>

                     <p> Type:  <code >npm install http-server -g</code> </p>
                    <div class="row">
                      <div class="col-md-6">
                        <b>Windows Command Prompt</b>
                        <img src="stylesheets/img/Command_Prompt.png" alt="" width="100%">
                      </div>
                      <div class="col-md-6">
                        <b>OSX/Linux Terminal</b>
                        <img src="stylesheets/img/terminal.jpg" alt="" width="100%">
                      </div>
                    </div>
                    <hr>

                    <h4>basic shell commands</h4>

                    <ul>
                      <li>Type <code>ls</code> (Windows users type <code>Dir</code>) to see a list of folders and files in the folder where you are. </li>
                      <li>Type <code>cd [THE FOLDER NAME HERE]</code> to go 'down' into some folder.</li>
                      <li>Type <code>cd ..</code> to go back 'up' a level. Like if you were in Documents, typing <code>cd ..</code> will take you up into your home folder.</li>
                    </ul>

                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h3>#4 Navigate to a folder in the Terminal/Command Prompt</h3>
                    <p>Once it's installed, to make the little Internet, type:  <code>http-server</code></p>

                   

                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h3>#5 Save a Basic HTML page</h3>
                    <p>Make a folder somewhere on your computer to store your web page and data files in. Now, we need to navigate to your folder in a command line interface. </p>

                        <p>Open Sublime Text and Copy and Paste the code below into a Sublime Text window. </p>
                </div>
                <div class="col-lg-4 col-sm-5">
                      <iframe id="preview" scrolling ="no" frameborder="0" height="300px" width="100%"></iframe>
                </div>
                <div class="col-lg-5 col-sm-6" style="font-size:12px;">
                            <textarea id="code" name="code">
<!-- always save this file as "index.html" -->
<!DOCTYPE html>
<html>
<style>
<!-- CSS goes here -->

  body{
    font-size: 15px;
  }

</style>
<!-- load libraries here -->
<script src="http://d3js.org/d3.v3.js"></script>

<body>
  <h3>Berkeley BART</h3>
  <p>sells coffee</p>
  <div id="main"></div>

</body>

<script type="text/javascript">  // write your d3.js code here
  var svg = d3.select("#main").append("svg")
      .attr("width", 200)
      .attr("height", 150)

  svg.append("circle")
    .attr({
      cx: 100,
      cy: 50,
      r: 50,
      fill: "crimson",
      opacity: 0.5
    });
</script>
</html></textarea>
                                    <script>
                                      var delay1;
                                      // Initialize CodeMirror editor with a nice html5 canvas demo.
                                      var editor1 = CodeMirror.fromTextArea(document.getElementById('code'), {
                                        mode: 'text/html'
                                      });
                                      editor1.on("change", function() {
                                        clearTimeout(delay1);
                                        delay = setTimeout(updatePreview1, 300);
                                      });
                                      
                                      function updatePreview1() {
                                        var previewFrame1 = document.getElementById('preview');
                                        var preview1 =  previewFrame1.contentDocument ||  previewFrame1.contentWindow.document;
                                        preview1.open();
                                        preview1.write(editor1.getValue());
                                        preview1.close();
                                      }
                                      setTimeout(updatePreview1, 300);
                                    </script>  
                        
                </div>
                <div class="clearfix"></div><br>
                <div class="col-lg-10 col-sm-11">
                    <p>Save this code as "index.html" in a special folder you create on your computer. Now go to your browser and type in: <code>localhost:8080</code></p>
                    <img src="stylesheets/img/localhost.png" alt="">
                    <div class="clearfix"></div><br>
                    <p>Click through to the folder where you made your website, and you should see the website.</p>

                    <h1 style="text-align: center;">BAM! YOU JUST PASSED THE LARGEST BARRIER OF ADOPTION.</h1>
                </div>
            </div>

        </div>
        <!-- /.container -->
    </div>
    <!-- /.content-section-a -->

   <section class="bg-2" id="section3" style="text-align: center;">
        <h2 style="padding: 20px;  background-color:rgba(5,5,5,.8); color: #fff">The Basics</h2>
    </section>

<div class="content-section-a">

        <div class="container">

            <div class="row">
                <div class="col-lg-4 col-sm-5">
                    <hr class="section-heading-spacer">
                    <div class="clearfix"></div>
                    <h2 class="section-heading">d3.js manipulates SVGs:</h2>
                    <p class="lead"> SVG images and their behaviors are defined in XML text files. This means that they can be searched, indexed, scripted, and compressed. </p><p> All major modern web browsers—including Mozilla Firefox, Internet Explorer, Google Chrome, Opera, and Safari—have at least some degree of SVG support and can render the markup directly.</p>
                </div>
                <div class="col-lg-4 col-sm-5">
                 <img src="stylesheets/img/vector-vs-raster1.png" style="margin-top:60px"> 
                </div>
            </div>

            <div class="row">
                <div class="col-lg-10 col-sm-11">
                <p> Before we get into examples in d3.js, let's briefly review SVGs in html.  This will give you a better idea of how d3.js utilizes <a href="http://en.wikipedia.org/wiki/JavaScript" traget="_blank">javascript</a> to animate data visualizations. Check out the code below; it shows a SVG circle in html.</p>
                </div>
            </div>

            <div class="row">
                 <div class="col-lg-4 col-sm-5">
                      <iframe id="simplecircle_preview" scrolling ="no" frameborder="0" height="300px" width="100%"></iframe>
                </div>
                <div class="col-lg-5 col-sm-6" style="font-size:12px;">
                            <textarea id="simplecircle" name="simplecircle">
<!DOCTYPE html>
<html>
<body>
  <svg width="300" height="300">
    <circle r="40" cx="100" cy="100"></circle>
  </svg>
</body>
</html></textarea>
                                    <script>
                                      var delay2;
                                      // Initialize CodeMirror editor with a nice html5 canvas demo.
                                      var editor2 = CodeMirror.fromTextArea(document.getElementById('simplecircle'), {
                                        mode: 'text/html'
                                      });
                                      editor2.on("change", function() {
                                        clearTimeout(delay2);
                                        delay2 = setTimeout(updatePreview2, 300);
                                      });
                                      
                                      function updatePreview2() {
                                        var previewFrame2 = document.getElementById('simplecircle_preview');
                                        var preview2 =  previewFrame2.contentDocument ||  previewFrame2.contentWindow.document;
                                        preview2.open();
                                        preview2.write(editor2.getValue());
                                        preview2.close();
                                      }
                                      setTimeout(updatePreview2, 300);
                                    </script>  
                        
                </div>
            </div><!-- /.row -->

            <div class="row">
                <div class="col-lg-10 col-sm-11">
                <p> To render a document such as an HTML page, most web browsers use an internal model similar to the Document Object Model (DOM), which is a cross-platform and language-independent convention for representing and interacting with objects in HTML, XHTML and XML documents. The nodes of every document are organized in a tree structure, called the DOM tree, with topmost node named "Document object". <a  href="http://en.wikipedia.org/wiki/DOM_events" target="_blank">DOM events</a> allow event-driven programming languages like JavaScript, JScript, ECMAScript, VBScript and Java to register various event handlers/listeners on the element nodes inside a DOM tree, e.g. HTML, XHTML, XUL and SVG documents.</p>

                <p> I like to think of the browser (e.g., viewer), JavaScript (e.g., language), and d3.js (e.g., a library within JavaScript) as a flipbook. The Document Object Model is an interface (e.g., the page) that will allow programs and scripts to dynamically access and update the content, structure and style of documents (e.g, the flipping of pages). With the object model, JavaScript gets all the power it needs to create 
                dynamic HTML: </p>
                <ul>
                    <li>JavaScript can change all the HTML elements in the page</li>
                    <li>JavaScript can change all the HTML attributes in the page</li>
                    <li>JavaScript can change all the CSS styles in the page</li>
                    <li>JavaScript can remove existing HTML elements and attributes</li>
                    <li>JavaScript can add new HTML elements and attributes</li>
                    <li>JavaScript can react to all existing HTML events in the page</li>
                    <li>JavaScript can create new HTML events in the page</li>
                </ul>
                </div>
            </div>

            <div class="row" style="margin-top:50px">
                 <div class="col-lg-4 col-sm-5">
                      <iframe id="d3circle_preview" scrolling ="no" frameborder="0" height="300px" width="100%"></iframe>
                </div>
                <div class="col-lg-5 col-sm-6" style="font-size:12px;">
                            <textarea id="d3circle" name="d3circle">
<!DOCTYPE html>
<html>
  <head>
    <script src="http://d3js.org/d3.v3.js"></script>
  </head>
  <body>
    <svg width="300" height="300">
      <circle r="100" cx="100" cy="100"></circle>
    </svg>
    <script>
    var circle = d3.select('svg').select('circle')
    
    // Commented Code:
    //circle.attr('r', 10).transition().attr('r', 40)
    //circle.style("fill", "red")
    /*circle.on("click", function(){ 
        d3.select(this).transition()
            .duration(1500)
            .attr("cy",150)})
    */
    </script>
  </body>
</html></textarea>
                                    <script>
                                      var delay3;
                                      // Initialize CodeMirror editor with a nice html5 canvas demo.
                                      var editor3 = CodeMirror.fromTextArea(document.getElementById('d3circle'), {
                                        mode: 'text/html'
                                      });
                                      editor3.on("change", function() {
                                        clearTimeout(delay3);
                                        delay3 = setTimeout(updatePreview3, 300);
                                      });
                                      
                                      function updatePreview3() {
                                        var previewFrame3 = document.getElementById('d3circle_preview');
                                        var preview3 =  previewFrame3.contentDocument ||  previewFrame3.contentWindow.document;
                                        preview3.open();
                                        preview3.write(editor3.getValue());
                                        preview3.close();
                                      }
                                      setTimeout(updatePreview3, 300);
                                    </script>  
                        
                </div>
            </div><!-- /.row -->

        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->

    <section class="bg-2" id="section3" style="text-align: center;">
        <h2 style="padding: 20px;  background-color:rgba(5,5,5,.8); color: #fff">Some Related Examples</h2>
    </section>

    <div class="content-section-a">

        <div class="container">
            <div class="row" style="margin-top:50px">
                 <div class="col-lg-8 col-sm-9">
                    <h1>Let's Make a Simple Chart</h1>
                      <p>You can download the data for this example <a href="stylesheets/data/flowers.csv">here</a>.  This is an example created by <a href="http://bl.ocks.org/mbostock/3887118" target="_blank"> Mike Bostock</a>. </p>
                      <iframe id="simple_chart_preview" scrolling ="no" frameborder="0" height="500px" width="700px"></iframe>
                </div>
                <div class="col-lg-8 col-sm-9" style="font-size:14px;">
                <h2> Code: </h2>
                            <textarea id="simple_chart" name="simple_chart">
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.dot {
  stroke: #000;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 660 - margin.left - margin.right,
    height = 450 - margin.top - margin.bottom;

var x = d3.scale.linear()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category10();

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.csv("stylesheets/data/flowers.csv", function(error, data) {
  data.forEach(function(d) {
    d.sepalLength = +d.sepalLength;
    d.sepalWidth = +d.sepalWidth;
  });

  x.domain(d3.extent(data, function(d) { return d.sepalWidth; })).nice();
  y.domain(d3.extent(data, function(d) { return d.sepalLength; })).nice();

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("Sepal Width (cm)");

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Sepal Length (cm)")

  svg.selectAll(".dot")
      .data(data)
    .enter().append("circle")
      .attr("class", "dot")
      .attr("r", 3.5)
      .attr("cx", function(d) { return x(d.sepalWidth); })
      .attr("cy", function(d) { return y(d.sepalLength); })
      .style("fill", function(d) { return color(d.species); });

  var legend = svg.selectAll(".legend")
      .data(color.domain())
    .enter().append("g")
      .attr("class", "legend")
      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

  legend.append("rect")
      .attr("x", width - 18)
      .attr("width", 18)
      .attr("height", 18)
      .style("fill", color);

  legend.append("text")
      .attr("x", width - 24)
      .attr("y", 9)
      .attr("dy", ".35em")
      .style("text-anchor", "end")
      .text(function(d) { return d; });

});

</script>
</textarea>
                                    <script>
                                      var delay4;
                                      // Initialize CodeMirror editor with a nice html5 canvas demo.
                                      var editor4 = CodeMirror.fromTextArea(document.getElementById('simple_chart'), {
                                        mode: 'text/html'
                                      });

                                      editor4.setSize(770, 1655);
                                      editor4.on("change", function() {
                                        clearTimeout(delay4);
                                        delay4 = setTimeout(updatePreview4, 300);
                                      });
                                      
                                      function updatePreview4() {
                                        var previewFrame4 = document.getElementById('simple_chart_preview');
                                        var preview4 =  previewFrame4.contentDocument ||  previewFrame4.contentWindow.document;
                                        preview4.open();
                                        preview4.write(editor4.getValue());
                                        preview4.close();
                                      }
                                      setTimeout(updatePreview4, 300);
                                    </script>  
                        
                </div>
            </div><!-- /.row -->

              <div class="row" style="margin-top:50px">
                 <div class="col-lg-8 col-sm-9">
                    <h1>Let's Make a Simple Map</h1>
                      <p>You can download the data for this example <a href="stylesheets/data/world-50m.json" download="world-50m.json">here</a>.  The base map projecion was also created by <a href="http://bl.ocks.org/mbostock/5625053" target="_blank"> Mike Bostock</a>. </p>
                      <iframe id="simple_map_preview" scrolling ="no" frameborder="0" height="500px" width="700px"></iframe>
                </div>
                <div class="col-lg-8 col-sm-9" style="font-size:14px;">
                <h2> Code: </h2>
                            <textarea id="simple_map" name="simple_map">
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  background: #fcfcfa;
}

.stroke {
  fill: none;
  stroke: #000;
  stroke-width: 3px;
}

.fill {
  fill: #fff;
}

.graticule {
  fill: none;
  stroke: #777;
  stroke-width: .5px;
  stroke-opacity: .5
}

.land {
  fill: #222;
}

.boundary {
  fill: none;
  stroke: #fff;
  stroke-width: .5px;
}

circle{
    fill: #A600A6;
    stroke: #D25FD2;
    stroke-width: 1px;
}

.tooltip2 {
    border: 1px solid #fff;
    color: "#000";
    background-color: #ffffff;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    -webkit-transition: all 0.218s;
    -moz-transition: all 0.218s;
    -o-transition: all 0.218s;
    transition: all 0.218s;
    -moz-box-shadow: 1px 1px 2px #000;
    -webkit-box-shadow: 1px 1px 2px #000;
    box-shadow: 1px 1px 2px #000;
    text-align: center;
    font: 14px arial;
    margin-top: 3px;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/d3.geo.projection.v0.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script>

var width = 660,
    height = 600;

var places = [
  {
    name: "Darfur, Sudan",
    location: {
      latitude: 13.0000,
      longitude: 25.0000
    }
  },
  {
    name: "Mawotsheni, South Africa",
    location: {
      latitude: -31.2667,
      longitude: 29.7333
    }
  }
]

//
var projection = d3.geo.chamberlin()
    .points([[0, 22], [45, 22], [22.5, -22]])
    .center([-2.5, -1.5])
    .scale(320)
    .translate([width / 2, height / 2])
    .precision(.1)
    .clipAngle(70);

var path = d3.geo.path()
    .projection(projection);

var graticule = d3.geo.graticule()
    .extent([[-30, -40], [70, 50]]);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var defs = svg.append("defs");

defs.append("path")
    .attr("id", "outline")
    .datum(graticule.outline)
    .attr("d", path);

defs.append("clipPath")
    .attr("id", "clip")
  .append("use")
    .attr("xlink:href", "#outline");

svg.append("use")
    .attr("class", "stroke")
    .attr("xlink:href", "#outline");

svg.append("use")
    .attr("class", "fill")
    .attr("xlink:href", "#outline");

svg.append("path")
    .datum(graticule)
    .attr("class", "graticule")
    .attr("d", path);

//On mouseover, the tooltip becomes visible.  Check out the CSS.  
var tooltip = d3.select("body")
    .append("div")
    .attr("class","tooltip2")
    .style("position", "absolute")
    .style("z-index", "10")
    .style("visibility", "hidden");

d3.json("stylesheets/data/world-50m.json", function(error, world) {
  var g = svg.insert("g", ".graticule")
      .attr("clip-path", "url(#clip)");

  g.append("path")
      .datum(topojson.feature(world, world.objects.land))
      .attr("class", "land")
      .attr("d", path);

  g.append("path")
      .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }))
      .attr("class", "boundary")
      .attr("d", path);
});

svg.selectAll(".pin")
  .data(places)
  .enter().append("circle", ".pin")
  .attr("r", 5)
  .attr("transform", function(d) {
    return "translate(" + projection([
      d.location.longitude,
      d.location.latitude
    ]) + ")"
  })
  .on("mouseover", function(d){
    d3.select(this).transition().duration(750).attr("r", 10);

    tooltip.style("visibility", "visible")
                    .style("background-color", "white")
                    .style("font-size", "14px")
                    .text("City: "+d.name);
  })
  .on("mousemove", function(){return tooltip.style("top", (event.pageY-30)+"px")
                    .style("left",(event.pageX+20)+"px");
                })
  .on("mouseout", function(d){
    d3.select(this).transition().duration(750).attr("r", 5);

    tooltip.style("visibility", "hidden");
  })

d3.select(self.frameElement).style("height", height + "px");

</script>
</textarea>
                                    <script>
                                      var delay5;
                                      // Initialize CodeMirror editor with a nice html5 canvas demo.
                                      var editor5 = CodeMirror.fromTextArea(document.getElementById('simple_map'), {
                                        mode: 'text/html'
                                      });

                                      editor5.setSize(770, 2800);
                                      editor5.on("change", function() {
                                        clearTimeout(delay5);
                                        delay5 = setTimeout(updatePreview5, 300);
                                      });
                                      
                                      function updatePreview5() {
                                        var previewFrame5 = document.getElementById('simple_map_preview');
                                        var preview5 =  previewFrame5.contentDocument ||  previewFrame5.contentWindow.document;
                                        preview5.open();
                                        preview5.write(editor5.getValue());
                                        preview5.close();
                                      }
                                      setTimeout(updatePreview5, 300);
                                    </script>  
                        
                </div>
            </div><!-- /.row -->

            <div class="row">
                <h2> <a href="#data-formats" name="data-formats">#</a>  <a href="https://github.com/mbostock/d3/wiki/Requests#convenience-methods" target="_blank">Data Formats</a>.</h2>
                <h4>List of websites to get shapefiles useful for visualizing urban data:</h4>
                <p>There are a large collection of geospatial files (e.g., shapefiles, kml, etc.) online. Here is a quick list of places I like to go for these files.</p>
                <ul class="center-block">
                  <li><a href="http://www.naturalearthdata.com/downloads/" target="_black">Natural Earth</a>
                  </li>
                  <li><a href="http://www.nationalatlas.gov/maplayers.html" target="_black">US Atlas</a>
                  </li>
                  <li><a href="https://data.sfgov.org/" target="_black">SFgov.org</a>
                  </li>
                  <li><a href="http://www.gis.fhwa.dot.gov/gisData.asp" target="_black">Federal Highway Administration</a>
                  </li>
                  <li><a href="https://github.com/mbostock/us-atlas" target="_black">US Atlas in d3.js</a>
                  </li>
                  <li><a href="http://www.census.gov/geo/maps-data/" target="_black">Census Bureau</a>
                  </li>
                  <li><a href="http://www.nws.noaa.gov/gis/shapepage.htm" target="_black">National Oceanic and Atmospheric Administration (NOAA)</a>
                  </li>
                  <li><a href="https://www.sciencebase.gov/catalog/items?q=&filter0=browseCategory%3DData&facetTermLevelLimit=false" target="_black">ScienceBase Catalog</a>
                  </li>
                </ul>

                <p>Geographic data files, such as <a href="http://en.wikipedia.org/wiki/Shapefile" target="_blank">shapefiles</a>, are too large to display and manipulate in internet browsers. For this reason, a large portion of your time creating a map will be retrieving and processing data. The d3.js library supports
                  <a href="https://github.com/mbostock/d3/wiki/Requests#convenience-methods" target="_blank">multiple data formats</a>, but the two most common used in examples you will find online are CSV and JSON.</p>
                <ul class="center-block">
                  <li><a href="https://github.com/mbostock/d3/wiki/CSV" target="_black">CSV</a>
                  </li>
                  <li><a href="https://www.dashingd3js.com/d3-examples/1-d3-and-javascript-working-with-json" target="_black">JSON</a>
                  </li>
                </ul>
                <p>The goal is then to manage and process your geographic data into these useful filetypes. Luckily, there are many helpful data processing tools available on the web.
                  <a href="http://bost.ocks.org/mike/" target="_blank">Mike Bostock</a> presents a great introduction to <a href="http://en.wikipedia.org/wiki/Shapefile" target="_blank">creating maps</a> using the <a href="http://www.gdal.org/" target="_blank">Geospatial Data Abstraction Library</a> (which includes <a href="http://www.gdal.org/ogr/" target="_blank">OGR Simple Features Library</a> and
                  <code><a href="http://www.gdal.org/ogr2ogr.html" target="_blank">ogr2ogr</a>
                  </code>). I highly encourage you to read more about <a href="http://geojson.org" target="_blank">GeoJSON</a> and Mike's <a href="https://github.com/mbostock/topojson" target="_blank">TopoJSON</a> data formats. For now, just know that these are the two measures needed to convert shapefiles into smaller, more manageable filetypes.</p>
            </div>


        </div>
        <!-- /.container -->

    </div>
    <!-- /.content-section-a -->

    <footer>
      <div class="container">
        <div class="row">
        <hr>
        <div class="container" style="margin-top:40px;"> <div id="services" style="background:#fff; color:#000"><div class="row"><div class="col-md-8 col-md-offset-2 text-center"><h1><a target="_blank" href="http://www.linkedin.com/pub/michael-taptich/21/263/b28/">#AboutMeQuick</a></h1> <p class="lead">I am a civil engineering Ph.D. student developing a comprehensive understanding of the nexuses shared between civil infrastructure, energy, and our environment. My research focuses on providing methods and computational tools to improve the accuracy of emissions assessments of transportation systems from a full life-cycle perspective. </p><p class="lead">I am also a co-founder of the Visualizing Urban Data IdeaLab at UC Berkeley.  Check out some of my data visualizations at: <a href="http://vudlab.com/">vudlab.com</a> or on my website <a href="http://www.ghggo.com/">GHGgo.com</a></p></div></div></div> </div>
          <div class="col-md-6 col-md-offset-3 text-center">
            <ul class="list-inline">
              <li><a href="mailto:m.taptich@berkeley.edu"><i class="fa fa-keyboard-o fa-3x"></i></a></li>
              <li><a href="https://twitter.com/MikeTaptich"><i class="fa fa-twitter fa-3x"></a></i></li>
              <li><a href="http://www.linkedin.com/pub/michael-taptich/21/263/b28/"><i class="fa fa-linkedin-square fa-3x"></i></a></li>
            </ul>
            <div class="top-scroll">
              <a href="#top"><i class="fa fa-circle-arrow-up scroll fa-4x"></i></a>
            </div>
            <hr>
            <p>Copyright &copy; Mike Taptich 2014</p>
          </div>
        </div>
      </div>
</footer>

    
    <!-- Core JavaScript Files -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="stylesheets/js/grayscale.js"></script>
    <script src="stylesheets/js/codemirror.js"></script>

</body>

</html>
